<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HW2 Code Timer</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/master.css">
    <link rel="stylesheet" href="../css/HW2.css">
    <link rel="stylesheet" href="../css/HW3.css">
</head>
<body>
    <header>
        <a class="anchor_to_c_file" href="../resources/CH3/CH3_Basic_Forking_c">get the code</a>
        <h1>HW5 Forking</h1>
        <ul>
            <li><a href="../../index.html">Home</a></li>
        </ul>
    </header>
    <main>
        <section>
            <p>
                #include &lt;stdio.h&gt;<br>
                #include &lt;stdio.h&gt;<br>
                #include &lt;unistd.h&gt;<br>
                #include &lt;stdlib.h&gt;<br>
                #include &lt;sys/wait.h&gt;<br>
                #include &lt;sys/types.h&gt;<br>
                #include &lt;sys/time.h&gt;<br>
                <br>
                int cols = 3;<br>
                int rows = 12;<br>
                int cCount = 26;<br>
                char c;<br>
                pid_t PID, pid;<br>
                <br>
                struct timeval get_my_timeval();<br>
                double compare_timevals(struct timeval end, struct timeval start);<br>
                <br>
                int main() {<br>
                <br>
                    &emsp;printf("Starting program: HW3_Basic_Forking\n\n");<br>
                    &emsp;printf("starting timer\n\n");<br>
                <br>
                    &emsp;struct timeval start = get_my_timeval();<br>
                <br>
                    &emsp;PID = getpid();<br>
                    &emsp;for (int i = 0; i &lt; rows; i++) {<br>
                        &emsp;&emsp;for (int j = 0; j &lt; cols; j++) {<br>
                            &emsp;&emsp;&emsp;for (int k = 0; k &lt; 26; ++k) {<br>
                                &emsp;&emsp;&emsp;&emsp;if (fork() == 0) {<br>
                                    &emsp;&emsp;&emsp;&emsp;&emsp;c = (char) (k + 65);<br>
                                    &emsp;&emsp;&emsp;&emsp;&emsp;putchar(c);<br>
                                    &emsp;&emsp;&emsp;&emsp;&emsp;exit(0);<br>
                                &emsp;&emsp;&emsp;&emsp;}<br>
                            &emsp;&emsp;&emsp;}<br>
                            &emsp;&emsp;&emsp;while(wait(NULL) != -1)<br>
                            &emsp;&emsp;&emsp;;<br>
                        &emsp;&emsp;}<br>
                        &emsp;&emsp;putchar('\n');<br>
                    &emsp;}<br>
                <br>
                <br>
                    &emsp;struct timeval end = get_my_timeval();<br>
                    &emsp;double elapsed = compare_timevals(end, start);<br>
                    &emsp;printf("\n\nElapsed time: %f\n\n", elapsed);<br>
                <br>
                    &emsp;printf("Done\n\n\n");<br>
                <br>
                <br>
                    &emsp;return 0;<br>
                }<br>
                <br>
                struct timeval get_my_timeval(){<br>
                    &emsp;struct timeval current;<br>
                    &emsp;gettimeofday(&current,NULL);<br>
                    &emsp;return current;<br>
                }<br>
                double compare_timevals(struct timeval end, struct timeval start) {<br>
                    &emsp;double result;<br>
                    &emsp;result = (end.tv_sec - start.tv_sec);<br>
                    &emsp;result += (end.tv_usec - start.tv_usec) / (double) 1000000;<br>
                    &emsp;return result;<br>
                }<br>
                     
            </p>
            <div>
                <h3>Output</h3>
                <img src="../media/CH3_Program_Output.png" alt="">
            </div>
        </section>
    </main>
</body>
</html>