<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HW2 Code Timer</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/master.css">
    <link rel="stylesheet" href="../css/HW2.css">
</head>
<body>
    <header>
        <a class="anchor_to_c_file" href="../resources/CH3/main_cpp">get the code</a>
        <h1>HW5 Forking</h1>
        <ul>
            <li><a href="../../index.html">Home</a></li>
        </ul>
    </header>
    <main>
        <section>
            <p>
                #include <iostream><br>
                #include <unistd.h><br>
                #include <sys/wait.h><br>
                #include <thread><br>
                #include <chrono><br><br>
                
                int main() {<br>
                    &emsp;int waitTime; //argument<br>
                    &emsp;int PID; //forking pid<br><br>
                
                    &emsp;//Allocate an array of char letters A-Z<br>
                    &emsp;char charArr[26];<br>
                    &emsp;for (int i = 0; i &lt; 26; i++) {<br>
                        &emsp;&emsp;charArr[i] = (char)((int)'A' + i);
                    }<br><br>
                    
                    &emsp;//Seed srand<br>
                    &emsp;srand(time(0));<br><br>
                
                    &emsp;// Create 26 forks with FOR loop. In each loop <br>
                    &emsp;// put the forked processes to sleep for <br>
                    &emsp;// between 133 and 333 milliseconds. Then<br>
                    &emsp;// print a char from charArray[].<br>
                    &emsp;for (int i = 0; i &lt; 26; i++) {<br>
                        &emsp;&emsp;// fork<br>
                        &emsp;&emsp;PID = fork();<br>
                        &emsp;&emsp;// IF fork is a child process<br>
                        &emsp;&emsp;if (PID == 0) {<br>
                            &emsp;&emsp;&emsp;//Assign waitTime<br>
                            &emsp;&emsp;&emsp;waitTime = rand() % 200 + 133;<br>
                            &emsp;&emsp;&emsp;//Sleep for x milliseconds<br>
                            &emsp;&emsp;&emsp;std::this_thread::sleep_for(<br>
                                &emsp;&emsp;&emsp;&emsp;std::chrono::milliseconds(waitTime));<br>
                            &emsp;&emsp;&emsp;//Print a char from charArr<br>
                            &emsp;&emsp;&emsp;std::cout &lt;&lt; charArr[i];<br>
                            &emsp;&emsp;&emsp;//EXIT<br>
                            &emsp;&emsp;&emsp;exit(0);<br>
                        &emsp;&emsp;}<br>
                        &emsp;&emsp;else if (PID &lt; 0) {<br>
                            &emsp;&emsp;&emsp;perror("Fork Failed");<br>
                            &emsp;&emsp;&emsp;exit(0);<br>
                        &emsp;&emsp;}<br>
                    &emsp;}<br><br>
                
                    //Wait FOR all 26 child processes<br>
                    // to terminate<br>
                    &emsp;for (int i = 0; i &lt; 26; i++){<br>
                        &emsp;&emsp;PID = wait(NULL);<br>
                    &emsp;}<br>
                    &emsp;std::cout&lt;&lt;std::endl;<br><br>
                
                    &emsp;// RETURN<br>
                    &emsp;return 0;<br>
                }                    <br><br>
            </p>
            <div>
                <h3>Output</h3>
                <img src="../media/CH3_Program_Output.png" alt="">
            </div>
        </section>
    </main>
</body>
</html>